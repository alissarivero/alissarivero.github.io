---
const { delay = 0, duration = 18, size = 56 } = Astro.props;
---

<div class="butterfly-fly"
     style={`--dur:${duration}s; --delay:${delay}s; --size:${size}px;`}>
  <img src="/butterfly.svg" alt="Butterfly" aria-hidden="true" />
</div>

<style>
  .butterfly-fly {
    position: fixed;              /* floats over everything */
    inset: 0;                     /* flight path in viewport coords */
    width: var(--size);
    height: var(--size);
    pointer-events: none;         /* don't block clicks */
    z-index: 40;

    /* Flight path & orientation */
    offset-path: path("M 40 80 C 180 10, 320 150, 480 70 S 760 140, 920 40");
    offset-rotate: auto 90deg;

    /* Animate along the path */
    animation: fly var(--dur) linear var(--delay) infinite alternate;
  }

  .butterfly-fly img {
    display: block;
    width: 100%;
    height: 100%;
  }

  @keyframes fly {
    to { offset-distance: 100%; }
  }

  /* Mobile: smaller & gentler path */
  @media (max-width: 640px) {
    .butterfly-fly {
      width: calc(var(--size) * 0.8);
      height: calc(var(--size) * 0.8);
      offset-path: path("M 20 300 C 120 120, 220 360, 320 200 S 480 420, 620 240");
      animation-duration: calc(var(--dur) * 1.2);
    }
  }

  /* Respect reduced-motion preference */
  @media (prefers-reduced-motion: reduce) {
    .butterfly-fly { animation: none !important; }
  }
</style>
